---
import type { HTMLAttributes } from "astro/types";
import type { RepoData } from "~/types/projects";
import UserCircle from "@tabler/icons/outline/user-circle.svg";
import GitFork from "@tabler/icons/outline/git-fork.svg";
import Link from "~/components/Link.astro";
import Tooltip from "~/components/Tooltip.astro";

interface Props extends HTMLAttributes<"div"> {
  data: RepoData;
}

const { data } = Astro.props;
---

<div class="grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3">
  {
    data.map((repo) => (
      <div class="relative rounded-2xl bg-gray-100 p-6 shadow-lg transition-transform hover:scale-105">
        <div class="flex flex-col gap-2">
          <div class="flex items-center gap-2">
            {repo.fork && (
              <Tooltip label="This repo was forked">
                <GitFork class="h-6 w-6" />
              </Tooltip>
            )}
            <p>{repo.name}</p>
          </div>
          {repo.description && <p>{repo.description}</p>}
          <div class="flex items-center gap-2 text-sm">
            <Link
              target="_blank"
              rel="noopener noreferrer"
              href={repo.html_url}
            >
              View on Github
            </Link>
            {repo.user && (
              <>
                <div class="mx-2 h-4 w-[1px] bg-gray-300" />
                <Link
                  class="flex flex-row justify-center gap-1"
                  target="_blank"
                  rel="noopener noreferrer"
                  href={`https://github.com/${repo.user}`}
                >
                  <UserCircle class="h-4 w-4" />
                  <span >{repo.user}</span>
                </Link>
              </>
            )}
          </div>
        </div>
      </div>
    ))
  }
</div>
