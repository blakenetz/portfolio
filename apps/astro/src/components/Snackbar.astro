---
import type { HTMLAttributes } from "astro/types";

interface Props extends HTMLAttributes<"div"> {}

const { class: className, ...props } = Astro.props;

export function show(el: Element | null) {
  el?.classList.remove("hidden");
}
export function hide(el: Element | null, timeout = 10000) {
  setTimeout(() => el?.classList.add("hidden"), timeout);
}
export function getSnackbarElement() {
  return document.querySelector("[data-snackbar]"); // only show first snackbar
}
---

<style>
  [data-snackbar] {
    visibility: visible;
    animation: snackbar-slide 0.3s ease-out forwards;
    transform-origin: bottom;
  }

  [data-snackbar].hidden {
    visibility: hidden;
    animation: snackbar-slide 0.3s ease-in reverse forwards;
  }

  @keyframes snackbar-slide {
    from {
      transform: translateY(100%);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }
</style>

<div
  data-snackbar
  {...props}
  class:list={[
    "bg-aquamarine-700 fixed bottom-4 left-4 z-10 hidden rounded-full px-8 py-2 pr-6 text-sm font-bold",
    className,
  ]}
>
  <span class="flex items-center gap-2"><slot /></span>
</div>
