---
import GitForkIcon from "@tabler/icons/outline/git-fork.svg";
import UserCircleIcon from "@tabler/icons/outline/user-circle.svg";
import Divider from "~/components/Divider.astro";
import Link from "~/components/Link.astro";
import Grid from "~/components/projects/Grid.astro";
import GridItem from "~/components/projects/GridItem.astro";
import type { RepoData } from "~/types/projects";
import CodeLanguage from "./CodeLanguage.astro";

interface Props {
  data: RepoData;
}

const { data } = Astro.props;
---

<Grid>
  {
    data.map((repo, index) => (
      <GridItem index={index} class="justify-between">
        <div class="flex items-center gap-2">
          <div class="flex items-center gap-2 font-bold">
            {repo.fork && <GitForkIcon class="h-4 w-4" />}
            <span>{repo.name}</span>
          </div>
        </div>
        {repo.description && <p class="text-sm">{repo.description}</p>}
        <div class="flex flex-col gap-2">
          <div class="flex items-center gap-2 text-sm">
            <Link href={repo.html_url}>View on Github</Link>
            {repo.user && (
              <>
                <Divider />
                <Link
                  class="flex flex-row items-center gap-1"
                  href={`https://github.com/${repo.user}`}
                >
                  <UserCircleIcon class="h-4 w-4" />
                  <span>{repo.user}</span>
                </Link>
              </>
            )}
          </div>
          <div class="flex w-full flex-col items-center justify-between gap-1 text-xs md:flex-row">
            {repo.language && (
              <>
                <CodeLanguage language={repo.language} />
                <Divider />
              </>
            )}

            <p>{`Created ${repo.created_at}`}</p>
            <Divider />
            <p>{`Updated ${repo.updated_at}`}</p>
          </div>
        </div>
      </GridItem>
    ))
  }</Grid
>
