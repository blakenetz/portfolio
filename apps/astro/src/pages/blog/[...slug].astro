---
import { type CollectionEntry, getCollection, render } from "astro:content";
import { ANIMATE_COLORS_CLASSES } from "~/consts";
import Layout from "~/layouts/Root.astro";
import SourceLink from "~/components/blog/SourceLink.astro";
import Link from "~/components/Link.astro";

export async function getStaticPaths() {
  const posts = await getCollection("blog");
  return posts.map((post) => ({
    params: { slug: post.id },
    props: post,
  }));
}
type Props = CollectionEntry<"blog">;

const post = Astro.props;

const { Content } = await render(post);
---

<Layout
  headProps={{
    title: `BN | Blog | ${post.data.title}`,
    description: post.data.description,
  }}
>
  <section class="mx-auto flex max-w-4xl flex-col items-center gap-8 py-8">
    <div class="flex flex-col items-center gap-2">
      <h1 class={`${ANIMATE_COLORS_CLASSES} text-4xl font-bold inline-block`}>
        {post.data.title}
      </h1>
      {post.data.link && <SourceLink link={post.data.link} />}
    </div>

    <div
      class="prose prose-h1:font-bold prose-h1:text-xl prose-a:text-primary prose-a:no-underline prose-p:text-justify prose-img:rounded-xl prose-headings:underline max-w-none"
    >
      <Content components={{ a: Link }} />
    </div>
  </section>
</Layout>
